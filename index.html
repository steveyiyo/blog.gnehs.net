<!doctype html><html lang><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>勝勝</title><meta name=description content><meta name=author content="勝勝"><link href=https://blog.gnehs.net/an-old-hope.min.css rel=stylesheet><link href=https://blog.gnehs.net/style.css rel=stylesheet><link href=https://blog.gnehs.net/custom.css rel=stylesheet><link rel=apple-touch-icon href=/favicon.png><link rel=icon href=/favicon.png><meta name=generator content="Hugo 0.81.0"><link rel=alternate type=application/rss+xml href=https://blog.gnehs.net/index.xml title=勝勝><script>function setTheme(){if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');return}const c=new Date,g=localStorage.getItem('date'),d=String(c.getMonth()+1)+'.'+String(c.getDate()),e=c.getTime();let a,b;function f(){if(e>a&&e<b)return;document.body.classList.add('dark')}d!==g?(fetch('https://api.ipgeolocation.io/astronomy?apiKey=5ed37d85103e4defa5df4c5298ed5215').then(a=>a.json()).then(c=>{a=c.sunrise.split(':').map(Number),b=c.sunset.split(':').map(Number)}).catch(()=>{a=[7,0],b=[19,0]}).finally(()=>{a=c.setHours(a[0],a[1],0),b=c.setHours(b[0],b[1],0),f(),localStorage.setItem('sunrise',a),localStorage.setItem('sunset',b)}),localStorage.setItem('date',d)):(a=Number(localStorage.getItem('sunrise')),b=Number(localStorage.getItem('sunset')),f())}</script></head><body class="list home"><script>setTheme()</script><header class=header><nav class=nav><h1 class=logo><a href=https://blog.gnehs.net>勝勝</a></h1><ul class=menu><li><a href=/categories/>categories</a></li><li><a href=/tags/>tags</a></li><li><a href=/about/>about</a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>將 WordPress 文章匯入到 Hugo</h2></header><section class=entry-content><p>Hugo 官方有推薦幾個套件來協助文章的遷移，我先是先用了 wordpress-to-hugo-exporter，不過安裝後似乎無法成功開啟。
之後我用了 blog2md 便能順利匯入文章了。
事前準備 將文章從 WordPress 匯出 下載 blog2md 安裝 Node.js 開始轉換 cd ./blog2md-master/ 安裝 node 套件（註：需要 node.js） npm i 轉換檔案 node index.js w your-wordpress-backup-export.xml out 之後將 out 資料夾中的內容複製到 /content/posts 就完工了！...</p></section><footer class=entry-footer><time>2021 年 03 月 14 日</time></footer><a class=entry-link href=https://blog.gnehs.net/wordpress-posts-to-hugo/></a></article><article class=post-entry><header class=entry-header><h2>關於勝勝</h2></header><section class=entry-content><p>這裡是勝勝的部落格，你可以前往勝勝的 個人網站 了解更多有關勝勝的資訊！...</p></section><footer class=entry-footer><time>2021 年 03 月 14 日</time></footer><a class=entry-link href=https://blog.gnehs.net/about/></a></article><article class=post-entry><header class=entry-header><h2>如何使用 Javascript 將多部影片混合為一個影片</h2></header><section class=entry-content><p>最近在製作 How 發聲器 因為影片每個發音播放時都會有間隙，超討厭，但 How哥產生器 聽說是用 ffmpeg 來做輸出，要後端而且看起來很燒錢，所以在尋找純前端的做法。
我先說，這真的有夠搞剛，超級無敵麻煩，另外，如果你用 Node.js 用 fluent-ffmpeg 就好了。
在尋找的時候看到這個 How do i append two video files data to a source buffer using media source api? ，而且下面的 解法 還會動，甚至支援不同尺寸影片混合，所以我把它偷過來就好了嗎。
錯誤！ 他根本不會動，只知道不停地噴錯，明明我放的跟他一樣都是 MP4，我完全不知道他 Demo 怎麼會動 解法 在網路上尋找不同解法後，看了這篇文章「Transcoding assets for Media Source Extensions」，發現是 MP4 少了幾個 Flag 以及 codec 要自己拿 MP4Box 看了之後填進程式碼，拿 ffmpeg 處理過後就會動了。
結果處理時加這行就好了 -movflags frag_keyframe+empty_moov+default_base_moof ，害我花了快半天，真棒 Demo 你可以使用 Chrome 查看 How 發聲器
雖然有點音聲不同步，算了隨便啦...</p></section><footer class=entry-footer><time>2020 年 06 月 06 日</time></footer><a class=entry-link href=https://blog.gnehs.net/js-merge-video/></a></article><article class=post-entry><header class=entry-header><h2>在 PWA 應用程式中使用遮罩圖示（maskable icon）</h2></header><section class=entry-content><p>Chrome 最近釋出 79 版，終於支援了遮罩圖示（看看 Android 8 都出多久了），這篇教學會教你如何使用遮罩圖示。
準備清單 已更新 Chrome 79 的 Android 手機 要修改的 PWA 應用程式 圖示製作 要製作圖示必須保留相對應的安全區域，免得要顯示的內容被裁掉。
你可以在 Maskable​.app 預覽套用後的效果 修改 manifest.json 將 icons 中的圖示標示 "purpose": "maskable" 便可以使用遮罩了
{ "scope": "/", "name": "PokaPlayer", "short_name": "PokaPlayer", "icons": [{ "src": "./img/icons/icon.png", "sizes": "512x512", "type": "image/png" }, { "src": "./img/icons/icon-maskable.png", "sizes": "512x512", "type": "image/png", "purpose": "maskable" } ], "start_url": "/", "display": "standalone", "background_color": "#2f2b3e", "theme_color": "#ffffff" } 在手機上查看套用效果 套用成功了 參考資料...</p></section><footer class=entry-footer><time>2019 年 12 月 22 日</time></footer><a class=entry-link href=https://blog.gnehs.net/pwa-maskable-icon/></a></article><article class=post-entry><header class=entry-header><h2>透過 JS 即時偵測系統外觀是否處於深色模式</h2></header><section class=entry-content><p>在撰寫網頁時若要用 JS 來檢測系統的主題，你會需要用到 CSS 的 prefers-color-scheme: dark 來檢測是否適用於該條規則，我們可以在 js 使用 matchMedia 來查看檢測後的結果。
程式碼如下
const darkModeMediaQuery = window.matchMedia(`(prefers-color-scheme: dark)`); darkModeMediaQuery.addListener(e => { //當系統變更主題時都會執行這裡 const darkMode = e.matches; // darkMode: [true(深色主題開啟)|false(深色主題關閉)] }); ...</p></section><footer class=entry-footer><time>2019 年 12 月 14 日</time></footer><a class=entry-link href=https://blog.gnehs.net/js-detect-dark-mode/></a></article><footer class=page-footer><nav class=pagination><a class=next href=/page/2/>Next Page →</a></nav></footer><br><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-6834090314855499 data-ad-slot=2767030263></ins></main><footer class=footer><span>&copy; 2021 <a href=https://blog.gnehs.net>勝勝</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</span>
<span>&#183;</span>
<span>Theme️ <a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper</a></span></footer><script src=https://blog.gnehs.net/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-96NRMGGV7E"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-96NRMGGV7E')</script></body></html>